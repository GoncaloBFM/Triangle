<!DOCTYPE html>
<html>
<head>
<style type="text/css">
html, body {
  overflow: hidden;
}
</style>
<script id="vertex-shader" type="x-shader/x-vertex">
attribute vec4 vPosition;
uniform vec2 vTranslation;
uniform float angle;
uniform float depth;
varying vec2 vPoint;

void main(){
	float x = vPosition[0] + vTranslation[0];
	float y = vPosition[1] + vTranslation[1];
  vPoint = vec2(x, y);


  float a = angle * pow( y * y  + x * x, 0.5);
  //float a = angle * distance(vec2(x, y) , vec2(0, 0));

  float newX = x * cos(a) - y * sin(a);
  float newY = x * sin(a) + y * cos(a);

  if (newX < -depth) {
    newX = -depth;
  } else if(newX > depth) {
    newX = depth;
  }

  if (newY < -depth) {
    newY = -depth;
  } else if(newY > depth) {
    newY = depth;
  }

  gl_Position = vec4(newX,
                     newY,
                     vPosition[2], 
                     vPosition[3] * depth);
}
</script>
<script id="fragment-shader" type="x-shader/x-fragment">
precision mediump float;
uniform vec2 vLightPoint;
varying vec2 vPoint;
void main() {
    float r = abs(vLightPoint[0] - 256.0) / 256.0; //256 = 512 / 2 
    float b = abs(vLightPoint[1] - 256.0) / 256.0;
    float g = pow(pow(vPoint[1], 2.0) + pow(vPoint[0], 2.0) , 0.5) / 1.4142135;
    float a = 1.0;
    gl_FragColor = vec4(r, b, g, a);
}
</script>
<script type="text/javascript" src="../Common/webgl-utils.js"></script>
<script type="text/javascript" src="../Common/initShaders.js"></script>
<script type="text/javascript" src="../Common/MV.js"></script>
<script type="text/javascript" src="triangle.js"></script>
</head>
<body bgcolor="black">
    <title>Triangle</title>
    <table width="100%" height="1000" border="0">
        <tr>
            <td align="center">
                <canvas id="gl-canvas" width="1000" height="700" tabindex='1'>
                <!--<canvas id="gl-canvas" width="512" height="512">-->
                    Oops... your browser doesn't support the HTML5 canvas element"
                </canvas>
            </td>
        </tr>
    </table>
</body>
</html>